=== Subscriber Discounts for WooCommerce ===
Contributors: scott.deluzio
Tags: WooCommerce, MailChimp, ActiveCampaign, Discounts
Donate link: https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FG5QVYUDG6YUA
Requires at least: 2.9
Tested up to: 5.5.0
Stable tag: 1.3.2
License: GNU v2+

Easily send mailing list subscribers a discount code for joining your list.

== Description ==
Your WooCommerce shop's success may depend on growing your email mailing list. Many customers won't volunteer their email address without some sort of incentive. Offering your subscribers a discount in your shop is a great way to get them to provide you with their email address.

Subscriber Discounts for WooCommerce will create a unique discount code automatically for your subscribers every time someone joins your MailChimp or ActiveCampaign mailing list.

Everyone loves a discount - even a 10-15% discount could be the difference between making the sale and losing a customer forever.

**Features**

* Set the discount amount as either a percentage or a flat rate (i.e. 10% or $5).
* Set the number of times a discount code can be used, and whether or not the code can only be used once per customer.
* Customize the email message that is sent to your subscribers.
* Use HTML markup in your message to fine tune the formatting.

== Installation ==
1. Download archive and unzip in wp-content/plugins or install via Plugins - Add New.
2. Activate the plugin through the Plugins menu in WordPress.

== Frequently Asked Questions ==
= Can I customize the discount code that is generated by this plugin? =
By default, the plugin will generate a random discount code, which will look something like this *aebggfcgde*. If you do nothing else, the code returned will be random like this.

The filter `sdwoo_discount_code` has been added to the plugin so that you can customize the discount code that is generated.

You can use this filter to customize the discount code however you want. The discount code that this plugin generates is the value that is passed to the filter. The filter also passes the subscriber's email address, which can be used in the discount code.

Here is an example of how the filter would be used. You would need to put this in your theme's functions.php file or in a [custom plugin](https://scottdeluzio.com/intro-wordpress-plugin-development/).

	function example_custom_discount_code( $discount, $email_address ){
		// Add your company name as a prefix to the discount code:
		$new_code = 'MyCompanyName' . $discount;
		return $new_code;
	}
	add_filter( 'sdwoo_discount_code', 'example_custom_discount_code', 10, 2 );

If using this filter, please be careful that it does not return the same discount code for each customer.

= Are there any dependencies to use this plugin? =
This plugin requires that you have WooCommerce installed, and that you have a MailChimp or ActiveCampaign account.

= How do I use this plugin? =
The plugin's settings menu is found under WooCommerce > Subscriber Discounts. You will need to fill out most fields in order for the plugin to work correctly.

* MailChimp Key: This is a random string of letters and numbers that you need to enter in order to create a webhook in MailChimp. You can type anything you want here - it doesn't have to make sense. Something like e6uyUjSzNt9XTU51M1r5 is perfect. If this field is not filled in, your MailChimp subscribers won't receive a discount code. If you are not using MailChimp, leave this blank.
* ActiveCampaign Key: This is a random string of letters and numbers that you need to enter in order to create a webhook in ActiveCampaign. You can type anything you want here - it doesn't have to make sense. Something like e6uyUjSzNt9XTU51M1r5 is perfect. If this field is not filled in, your ActiveCampaign subscribers won't receive a discount code. If you are not using ActiveCampaign, leave this blank.
* Discount Name: Enter a label to identify discount codes in WooCommerce as having been generated by this plugin. For example, enter "Email subscriber discount". Regardless of what you enter here the subscriber's email address will be added to the end of the discount name.
* Discount Amount: Enter how much the discount should be for. Do not enter any symbols like $ or % just the number (i.e. 20)
* Discount Type: Enter the type of discount you are offering - either a percentage or a flat rate.
* Use once per customer: If the discount should expire after it has been used check this box.
* Max Uses: If you want to make the discount available to customers to use multiple times enter how many times here.
* Email Subject: This is the subject line used in the email sent to your subscribers. Something like "Thanks for subscribing to Acme Co. Newsletter" would work.
* From Email Address: Enter the address the discount code should be sent from. If you have a customer support or sales address, this would be a good email to enter. Try to make it an @yourdomain.com address, as some recipients may have trouble receiving from a GMail, Hotmail, Yahoo, etc. address.
* From Display Name: Enter your name or the company name that the email should come from.
* Customer Placeholder Name: Enter a generic greeting name if you are using the {firstname} placeholder tag provided. This will allow you to have a greeting to the customer if they do not enter a name in their signup.
* Message: Enter the message your customers should receive in the email. Be sure to include the {code} placeholder tag, otherwise they will not receive the discount code.

= How do I set up webhooks in MailChimp? =
You can find the technical details on how to create a webhook through MailChimp by [clicking here](http://kb.mailchimp.com/integrations/api-integrations/how-to-set-up-webhooks).

General steps:

* Click Audience tab > All Contacts
* Click Settings > Webhooks
* Click create new webhook button
* Paste your callback URL
* Under "What type of updates should we send" check only Subscribes (uncheck all other boxes)
* Under "Only send updates when a change is made..." keep all checked unless you only want to send a discount to a certain type of change.
* Save

Your webhook callback URL should be http://yourdomain.com/?trigger-special-discount=true&discount-key=xxxxxxxxxxxx

Replace yourdomain.com with your actual website domain, and replace xxxxxxxxxxxx with the MailChimp Key entered in the plugin settings.

= How do I set up webhooks in ActiveCampaign? =
You can find the technical details on how to create a webhook through ActiveCampaign by [clicking here](http://www.activecampaign.com/api/webhooks.php).

General steps:

* Click Automations tab
* Click New Automation button
* Click Start From Scratch
* Click Subscribes
* Select your list or leave as any list
* Add Webhook as an action (paste your webhook URL)
* Add End this automation as an action

Your webhook callback URL should be http://yourdomain.com/?trigger-special-discount=true&discount-key=xxxxxxxxxxxx

Replace yourdomain.com with your actual website domain, and replace xxxxxxxxxxxx with the ActiveCampaign Key entered in the plugin settings.

== Changelog ==
= 1.3.1 =
* Updated WooCommerce tested up to version.
= 1.3.0 =
* New: Included filter for modifying discount code parameters. Filter sdwoo_discount_args gets passed the $discount_args array, which can be added to, or otherwise modified.
= 1.2.0 =
* New: Included filter for customizing the generated discount code. Filter sdwoo_discount_code gets passed the plugin generated discount code as well as the user's email address.
= 1.1.5 =
* Fix: Typo in exclude sale items in create-discount.php
= 1.1.4 =
* Fix: Incorrect meta key used for excluding sale items. `exclude_sale` was used instead of the correct `exclude_sale_items`
= 1.1.3 =
* Added option to exclude sale items from coupon usage.
= 1.1.2 =
* Updated POT language file for translations
= 1.1.1 =
* Updated SDWOO_Create_Discount class to allow for plugin developers to extend this class and integrate with other email services.
= 1.0.0 =
* Initial version

== Upgrade Notice ==
= 1.3.1 =
* Updated WooCommerce tested up to version.